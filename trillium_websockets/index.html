<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A websocket trillium handler"><meta name="keywords" content="rust, rustlang, rust-lang, trillium_websockets"><title>trillium_websockets - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../trillium_websockets/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../trillium_websockets/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate trillium_websockets</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.5.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section><div id="sidebar-vars" data-name="trillium_websockets" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../trillium_websockets/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">trillium_websockets</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/trillium_websockets/lib.rs.html#1-292">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="a-websocket-trillium-handler"><a href="#a-websocket-trillium-handler">A websocket trillium handler</a></h2>
<p>There are three primary ways to use this crate</p>
<h3 id="with-an-async-function-that-receives-a-websocketconn"><a href="#with-an-async-function-that-receives-a-websocketconn">With an async function that receives a <code>WebSocketConn</code></a></h3>
<p>This is the simplest way to use trillium websockets, but does not
provide any of the affordances that implementing the
<a href="trait.WebSocketHandler.html" title="WebSocketHandler"><code>WebSocketHandler</code></a> trait does. It is best for very simple websockets
or for usages that require moving the WebSocketConn elsewhere in an
application. The WebSocketConn is fully owned at this point, and will
disconnect when dropped, not when the async function passed to
<code>websocket</code> completes.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">futures_lite::stream::StreamExt</span>;
<span class="kw">use</span> <span class="ident">trillium_websockets</span>::{<span class="ident">Message</span>, <span class="ident">WebSocketConn</span>, <span class="ident">websocket</span>};

<span class="kw">let</span> <span class="ident">handler</span> <span class="op">=</span> <span class="ident">websocket</span>(<span class="op">|</span><span class="kw-2">mut</span> <span class="ident">conn</span>: <span class="ident">WebSocketConn</span><span class="op">|</span> <span class="kw">async</span> <span class="kw">move</span> {
    <span class="kw">while</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">Message::Text</span>(<span class="ident">input</span>))) <span class="op">=</span> <span class="ident">conn</span>.<span class="ident">next</span>().<span class="kw">await</span> {
        <span class="ident">conn</span>.<span class="ident">send_string</span>(<span class="macro">format!</span>(<span class="string">&quot;received your message: {}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">input</span>)).<span class="kw">await</span>;
    }
});</code></pre></div>
<h3 id="implementing-websockethandler"><a href="#implementing-websockethandler">Implementing <code>WebSocketHandler</code></a></h3>
<p><a href="trait.WebSocketHandler.html" title="WebSocketHandler"><code>WebSocketHandler</code></a> provides support for sending outbound messages as a
stream, and simplifies common patterns like executing async code on
received messages.</p>
<h3 id="using-jsonwebsockethandler"><a href="#using-jsonwebsockethandler">Using <code>JsonWebSocketHandler</code></a></h3>
<p>[<code>JsonWebSocketHandler</code>] provides a thin serialization and
deserialization layer on top of <a href="trait.WebSocketHandler.html" title="WebSocketHandler"><code>WebSocketHandler</code></a> for this common
use case.  See the [<code>JsonWebSocketHandler</code>] documentation for example
usage. In order to use this trait, the <code>json</code> cargo feature must be
enabled.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.async_tungstenite"><code>pub use async_tungstenite;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item" id="reexport.tungstenite"><code>pub use async_tungstenite::tungstenite;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.WebSocket.html" title="trillium_websockets::WebSocket struct">WebSocket</a></div><div class="item-right docblock-short"><p>The trillium handler.
See crate-level docs for example usage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.WebSocketConfig.html" title="trillium_websockets::WebSocketConfig struct">WebSocketConfig</a></div><div class="item-right docblock-short"><p>The configuration for WebSocket connection.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.WebSocketConn.html" title="trillium_websockets::WebSocketConn struct">WebSocketConn</a></div><div class="item-right docblock-short"><p>A struct that represents an specific websocket connection.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="trillium_websockets::Error enum">Error</a></div><div class="item-right docblock-short"><p>Possible WebSocket errors.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Message.html" title="trillium_websockets::Message enum">Message</a></div><div class="item-right docblock-short"><p>An enum representing the various forms of a WebSocket message.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.WebSocketHandler.html" title="trillium_websockets::WebSocketHandler trait">WebSocketHandler</a></div><div class="item-right docblock-short"><p>This is the trait that defines a handler for trillium websockets.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.websocket.html" title="trillium_websockets::websocket fn">websocket</a></div><div class="item-right docblock-short"><p>Builds a new trillium handler from the provided
WebSocketHandler. Alias for <a href="struct.WebSocket.html#method.new" title="WebSocket::new"><code>WebSocket::new</code></a></p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="trillium_websockets::Result type">Result</a></div><div class="item-right docblock-short"><p>a Result type for websocket messages</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="trillium_websockets" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0-nightly (5750a6aa2 2022-06-20)" ></div>
</body></html>