<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This is the trait that defines a handler for trillium websockets."><meta name="keywords" content="rust, rustlang, rust-lang, WebSocketHandler"><title>WebSocketHandler in trillium_websockets - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../trillium_websockets/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../trillium_websockets/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">WebSocketHandler</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-associated-types">Required Associated Types</a></h3><ul><li><a href="#associatedtype.OutboundStream">OutboundStream</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.connect">connect</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><ul><li><a href="#method.disconnect">disconnect</a></li><li><a href="#method.inbound">inbound</a></li><li><a href="#method.send">send</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In trillium_websockets</a></h2><div id="sidebar-vars" data-name="WebSocketHandler" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../trillium_websockets/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="index.html">trillium_websockets</a>::<wbr><a class="trait" href="#">WebSocketHandler</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#127-168">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait WebSocketHandler: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + 'static {
    type <a href="#associatedtype.OutboundStream" class="associatedtype">OutboundStream</a>: Stream&lt;Item = <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static;

    fn <a href="#tymethod.connect" class="fnname">connect</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn: <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a>, Self::<a class="associatedtype" href="trait.WebSocketHandler.html#associatedtype.OutboundStream" title="type trillium_websockets::WebSocketHandler::OutboundStream">OutboundStream</a>)&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;

    fn <a href="#method.inbound" class="fnname">inbound</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message: <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.send" class="fnname">send</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message: <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.Error.html" title="enum trillium_websockets::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.disconnect" class="fnname">disconnect</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close_frame: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;CloseFrame&lt;'static&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="this-is-the-trait-that-defines-a-handler-for-trillium-websockets"><a href="#this-is-the-trait-that-defines-a-handler-for-trillium-websockets">This is the trait that defines a handler for trillium websockets.</a></h2>
<p>There are several mutually-exclusive ways to use this trait, and it is
intended to be flexible for different use cases. If the trait does not
support your use case, please open a discussion and/or build a trait
on top of this trait to add additional functionality.</p>
<h3 id="simple-example"><a href="#simple-example">Simple Example</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">trillium_websockets</span>::{<span class="ident">Message</span>, <span class="ident">WebSocket</span>, <span class="ident">WebSocketConn</span>, <span class="ident">WebSocketHandler</span>};
<span class="kw">use</span> <span class="ident">futures_lite::stream</span>::{<span class="ident">pending</span>, <span class="ident">Pending</span>};

<span class="kw">struct</span> <span class="ident">EchoServer</span>;
<span class="attribute">#[<span class="ident">trillium::async_trait</span>]</span>
<span class="kw">impl</span> <span class="ident">WebSocketHandler</span> <span class="kw">for</span> <span class="ident">EchoServer</span> {
    <span class="kw">type</span> <span class="ident">OutboundStream</span> <span class="op">=</span> <span class="ident">Pending</span><span class="op">&lt;</span><span class="ident">Message</span><span class="op">&gt;</span>; <span class="comment">// we don&#39;t use an outbound stream in this example</span>

    <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">connect</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">conn</span>: <span class="ident">WebSocketConn</span>) -&gt; <span class="prelude-ty">Option</span><span class="op">&lt;</span>(<span class="ident">WebSocketConn</span>, <span class="ident"><span class="self">Self</span>::OutboundStream</span>)<span class="op">&gt;</span> {
        <span class="prelude-val">Some</span>((<span class="ident">conn</span>, <span class="ident">pending</span>()))
    }

    <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">inbound</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">message</span>: <span class="ident">Message</span>, <span class="ident">conn</span>: <span class="kw-2">&amp;mut</span> <span class="ident">WebSocketConn</span>) {
        <span class="kw">let</span> <span class="ident">path</span> <span class="op">=</span> <span class="ident">conn</span>.<span class="ident">path</span>().<span class="ident">to_string</span>();
        <span class="kw">if</span> <span class="kw">let</span> <span class="ident">Message::Text</span>(<span class="ident">input</span>) <span class="op">=</span> <span class="ident">message</span> {
            <span class="kw">let</span> <span class="ident">reply</span> <span class="op">=</span> <span class="macro">format!</span>(<span class="string">&quot;received your message: {} at path {}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">input</span>, <span class="kw-2">&amp;</span><span class="ident">path</span>);
            <span class="ident">conn</span>.<span class="ident">send_string</span>(<span class="ident">reply</span>).<span class="kw">await</span>;
        }
    }
}

<span class="kw">let</span> <span class="ident">handler</span> <span class="op">=</span> <span class="ident">WebSocket::new</span>(<span class="ident">EchoServer</span>);</code></pre></div>
<h3 id="using-websockethandlerconnect-only"><a href="#using-websockethandlerconnect-only">Using <code>WebSocketHandler::connect</code> only</a></h3>
<p>If you have needs that are not supported by this trait, you can either
pass an <code>Fn(WebSocketConn) -&gt; impl Future&lt;Output=()&gt;</code> as a handler, or
implement your own connect-only trait implementation that takes the
WebSocketConn and returns None. The tcp connection will remain intact
until the WebSocketConn is dropped, so you can store it in any data
structure or move it between threads as needed.</p>
<h3 id="using-streams"><a href="#using-streams">Using Streams</a></h3>
<p>If you define an associated OutboundStream type and return it from
<code>connect</code>, every message in that Stream will be sent to the connected
websocket client. This is useful for sending messages that are
triggered by other events in the application, using whatever channel
mechanism is appropriate for your application. The websocket
connection will be closed if the stream ends, yielding None.</p>
<p>If you do not need to use streams, set <code>OutboundStream = futures_lite::stream::Pending&lt;Message&gt;</code> or a similar stream
implementation that never yields. If associated type defaults were
stable, we would use that.</p>
<h3 id="receiving-client-sent-messages"><a href="#receiving-client-sent-messages">Receiving client-sent messages</a></h3>
<p>Implement <a href="trait.WebSocketHandler.html#method.inbound" title="WebSocketHandler::inbound"><code>WebSocketHandler::inbound</code></a> to receive client-sent
messages. Currently inbound messages are not represented as a stream,
but this may change in the future.</p>
<h3 id="holding-data-inside-of-the-implementing-type"><a href="#holding-data-inside-of-the-implementing-type">Holding data inside of the implementing type</a></h3>
<p>As this is a trait you implement for your own type, you can hold
additional data or structs inside of your struct. There will be
exactly one of these structs shared throughout the application, so
async concurrency types can be used to mutate shared data.</p>
<p>This example holds a shared BroadcastChannel that is cloned for each
OutboundStream. Any message that a connected clients sends is
broadcast to every other connected client.</p>
<p>Importantly, this means that the dispatch and fanout of messages is
managed entirely by your implementation. For an opinionated layer on
top of this, see the trillium-channels crate.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">broadcaster::BroadcastChannel</span>;
<span class="kw">use</span> <span class="ident">trillium_websockets</span>::{<span class="ident">Message</span>, <span class="ident">WebSocket</span>, <span class="ident">WebSocketConn</span>, <span class="ident">WebSocketHandler</span>};

<span class="kw">struct</span> <span class="ident">EchoServer</span> {
    <span class="ident">channel</span>: <span class="ident">BroadcastChannel</span><span class="op">&lt;</span><span class="ident">Message</span><span class="op">&gt;</span>,
}
<span class="kw">impl</span> <span class="ident">EchoServer</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> {
            <span class="ident">channel</span>: <span class="ident">BroadcastChannel::new</span>(),
        }
    }
}

<span class="attribute">#[<span class="ident">trillium::async_trait</span>]</span>
<span class="kw">impl</span> <span class="ident">WebSocketHandler</span> <span class="kw">for</span> <span class="ident">EchoServer</span> {
    <span class="kw">type</span> <span class="ident">OutboundStream</span> <span class="op">=</span> <span class="ident">BroadcastChannel</span><span class="op">&lt;</span><span class="ident">Message</span><span class="op">&gt;</span>;

    <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">connect</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">conn</span>: <span class="ident">WebSocketConn</span>) -&gt; <span class="prelude-ty">Option</span><span class="op">&lt;</span>(<span class="ident">WebSocketConn</span>, <span class="ident"><span class="self">Self</span>::OutboundStream</span>)<span class="op">&gt;</span> {
        <span class="prelude-val">Some</span>((<span class="ident">conn</span>, <span class="self">self</span>.<span class="ident">channel</span>.<span class="ident">clone</span>()))
    }

    <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">inbound</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">message</span>: <span class="ident">Message</span>, <span class="ident">_conn</span>: <span class="kw-2">&amp;mut</span> <span class="ident">WebSocketConn</span>) {
        <span class="kw">if</span> <span class="kw">let</span> <span class="ident">Message::Text</span>(<span class="ident">input</span>) <span class="op">=</span> <span class="ident">message</span> {
            <span class="kw">let</span> <span class="ident">message</span> <span class="op">=</span> <span class="ident">Message::text</span>(<span class="macro">format!</span>(<span class="string">&quot;received message: {}&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">input</span>));
            <span class="macro">trillium::log_error!</span>(<span class="self">self</span>.<span class="ident">channel</span>.<span class="ident">send</span>(<span class="kw-2">&amp;</span><span class="ident">message</span>).<span class="kw">await</span>);
        }
    }
}

<span class="comment">// fn main() {</span>
<span class="comment">//     trillium_smol::run(WebSocket::new(EchoServer::new()));</span>
<span class="comment">// }</span>
</code></pre></div>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedtype.OutboundStream" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#135">source</a></div><h4 class="code-header">type <a href="#associatedtype.OutboundStream" class="associatedtype">OutboundStream</a>: Stream&lt;Item = <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static</h4></div></summary><div class="docblock"><p>A [<code>Stream</code>] type that represents <a href="enum.Message.html" title="Message"><code>Message</code></a>s to be sent to this
client. It is built in your implementation code, in
<a href="trait.WebSocketHandler.html#tymethod.connect" title="WebSocketHandler::connect"><code>WebSocketHandler::connect</code></a>. Use <code>Pending&lt;Message&gt;</code> or another
stream that never returns if you do not need to use this aspect of
the trait.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.connect" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#143">source</a></div><h4 class="code-header">fn <a href="#tymethod.connect" class="fnname">connect</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;conn: <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a>, Self::<a class="associatedtype" href="trait.WebSocketHandler.html#associatedtype.OutboundStream" title="type trillium_websockets::WebSocketHandler::OutboundStream">OutboundStream</a>)&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>This interface is the only mandatory function in
WebSocketHandler. It receives an owned WebSocketConn and
optionally returns it along with an <code>OutboundStream</code>
type.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.inbound" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#149">source</a></div><h4 class="code-header">fn <a href="#method.inbound" class="fnname">inbound</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;message: <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>This interface function is called once with every message received
from a connected websocket client.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.send" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#157-159">source</a></div><h4 class="code-header">fn <a href="#method.send" class="fnname">send</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;message: <a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="enum" href="enum.Error.html" title="enum trillium_websockets::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>This interface function is called once with every outbound message
in the OutboundStream. You likely do not need to implement this,
but if you do, you must call <code>conn.send(message).await</code> or the
message will not be sent.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.disconnect" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#166-167">source</a></div><h4 class="code-header">fn <a href="#method.disconnect" class="fnname">disconnect</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;conn: &amp;'life1 mut <a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;close_frame: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;CloseFrame&lt;'static&gt;&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>This interface function is called with the websocket conn and, in
the case of a clean disconnect, the [<code>CloseFrame</code>] if one is sent
available.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-WebSocketHandler" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/trillium_websockets/websocket_handler.rs.html#171-183">source</a></span><a href="#impl-WebSocketHandler" class="anchor"></a><h3 class="code-header in-band">impl&lt;H, Fut&gt; <a class="trait" href="trait.WebSocketHandler.html" title="trait trillium_websockets::WebSocketHandler">WebSocketHandler</a> for H <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a>) -&gt; Fut + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,&nbsp;</span></h3></section></summary><div class="impl-items"><section id="associatedtype.OutboundStream-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.OutboundStream-1" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.OutboundStream" class="associatedtype">OutboundStream</a> = Pending&lt;<a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a>&gt;</h4></section></div></details></div><script type="text/javascript" src="../implementors/trillium_websockets/websocket_handler/trait.WebSocketHandler.js" data-ignore-extern-crates="" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="trillium_websockets" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0-nightly (5750a6aa2 2022-06-20)" ></div>
</body></html>